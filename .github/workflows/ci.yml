name: CI

on:
  push:
    branches:
      - 'main'
      - 'feature/pipeline-deployment'
  pull_request:
    types: [ opened ]

env:
  DOCKER_IMAGE: butcherless/sibyplay:1.0.4


jobs:
  set-global-variable:
    runs-on: ubuntu-latest
    steps:
      - name: Set global variable
        run: |
          echo "MY_VER=1234" >> $GITHUB_ENV
          echo "MY_ART=my-art" >> $GITHUB_ENV
        shell: bash

      - name: access var
        run: |
          MY_STR="$MY_ART..$MY_VER"
          echo "my var: $MY_STR eol"

  use-global-variable:
    needs: set-global-variable
    runs-on: ubuntu-latest
    steps:
      - name: Use global variable
        run: |
          echo "Global variable MY_VAR: $MY_VAR"
  